
# API - отримай дані в JSON

## Всі депутати
##### Щоб отримати всіх депутатів в раді потрібно виконати запит за адресою:

<%= link_to  api_mps_url(:format =>"json"), api_mps_url(:format =>"json") %>
Цей запит надає базову інформацію про кожного депутата місцевої ради. Він містить:
* їхні імена
* фракцію/групу, до якої належить депутат
* номер округу (якщо є)
* дату початку повноважень
* дату складання повноважень, якщо депутат вибув

| Параметр     | Опис |
|------------|------------
| id |ідентифікатор депутата |
|deputy_id| унікальний ідентифікатор депутата в системі|
|first_name | ім’я
|middle_name | по-батькові|
|last_name| прізвище|
|faction | фракція/група|
|okrug | номер округу, в якому балотувався кандидат|
|start_date | дата початку повноважень|
|end_date | дата складання повноважень|

*Примітка: Значення “2015-10-20” в `“start_date”`  – означає, що депутат набув повноважень з початком каденції відповідного скликання міської ради.
Значення "9999-12-31" в `“end_date”` означає, що депутат наразі виконує свої повнованження.
 
## Деталі щодо депутатів
##### Щоб отримати більш детальну інформацію про депутата, використовуй універсальний ідентифікатор депутата `deputy_id` і роби запит за адресою:
<%= link_to  api_mp_url(:format =>"json", deputy_id: 1), api_mp_url(:format =>"json", deputy_id: 1) %>
цей запит видасть всю корисну і деталізовану інформацію, яка містить базову інформацію про депутата який має ідентифікатор `id=1`, де
 
| Параметр     | Опис |
|------------|------------|
| id |ідентифікатор депутата |
|deputy_id| унікальний ідентифікатор депутата в системі|
|first_name | ім’я
|middle_name | по-батькові|
|last_name| прізвище|
|faction | фракція/група|
|okrug | номер округу, в якому балотувався кандидат|
|start_date | дата початку повноважень|
|end_date | дата складання повноважень|
|mp_infos | підструктура, що містить інформацію про результати голосувань депутата за конкретний місяць|
 
 
Підструктура `mp_infos` містить інформацію про голосування депутата за конкретний місяць, де :

| Параметр     | Опис |
|------------|------------|
| rebellions |кількість голосувань, коли депутат голосував проти фракції|
|not_voted| кількість голосувань, коли депутат не голосував за вказаний період|
|absent |  кількість голосувань, коли депутат був відсутній за вказаний період|
|agains | кількість голосувань депутата«Проти» за вказаний період|
|aye_voted| кількість голосувань депутата «За», протягом вказаного періоду|
|abstain | кількість голосувань депутата «Утримався» за вказаний період|
|votes_possible | загальна кількість голосувань за вказаний період|
|votes_attended | кількість голосувань, під час яких депутат був зареєстрований за вказаний період|
|date_mp_info | місяць і рік за який вказана статистика|

*Примітка: для значення `date_mp_info = "9999-12-31"` статистика вказана за всю каденцію депутата
*Примітка: Голосування `“проти фракці”` обраховуються для фракцій, кількість депутатів в яких перевищує 4 особи

 
## Інформація про голосування
##### Щоб отримати інформацію про голосування використовуйте наступні посилання :
<%= link_to  api_divisions_url(:format =>"json"), api_divisions_url(:format =>"json") %>
Цей запит надає інформацію про останні 25 голосувань і має наступну структуру.
Першим елементом є список з 7 елементів, який містить загальну інформацію про дану сторінку, де :

| Параметр     | Опис |
|------------|------------
|current |номер поточної сторінки|
|previous|номер попередньої сторінки|
|next | номер наступної сторінки|
|per_page| False|
|pages| загальна кількість сторінок|
|count_page | кількість голосувань на сторінці|
|count | загальна кількість голосувань|

Наступними слідують 25 списків з 6 елементів, які містять наступні дані про 25 голосувань :

| Параметр     | Опис |
|------------|------------
|id | унікальний ідентифікатор голосування |
|date |дата голосування|
|number | номер рішення|
|name| назва питання, за яке голосували|
|clock_time| час голосування|
|result | результат голосування |
|count | кількість голосувань на сторінці|
 
##### Для отримання попередніх голосувань використовуйте посилання: 
<%= link_to  api_divisions_url(:format =>"json", page: 2), api_divisions_url(:format =>"json", page:2) %>
де `page=2` – номер сторінки, з 25 голосуваннями.
 
## Деталі голосувань
##### Для отримання інформації про конкретне голосування використовуйте наступне посилання :
<%= link_to  api_division_url(:format =>"json", division: Division.first.id), api_division_url(:format =>"json", division: Division.first.id) %>
*для отримання інформації про визначене голосування використовуйте  унікальний ідентифікатор голосування `id`, та вставте його після знаку `“=”` в посиланні
в цьому наборі міститься наступна інформація :

| Параметр     | Опис |
|------------|------------
|id | унікальний ідентифікатор голосування |
|date |дата голосування|
|number | номер рішення|
|name| назва питання, за яке голосували|
|clock_time| час голосування|
|result | кількість голосувань на сторінці|
|count | результат голосування|
|division_info | підструктура, яка містить загальну інформацію про результати голосування|
|votes|  підструктура, яка містить дані про голосування кожного депутата за дане голосування|

Підструктура `division_info` містить наступну інформацію :

| Параметр     | Опис |
|------------|------------
| id | унікальний ідентифікатор голосування|
| division_id | унікальний ідентифікатор голосування|
|aye_votes| кількість голосувань «За» |
|no_votes| кількість випадків, коли депутати не голосували |
|absent |  кількість депутатів, які були відсутні під час голосування|
|against | кількість голосувань «Проти» |
|abstain | кількість голосувань «Утримався» |
|possible_turnout | загальна кількість депутатів,які могли взяти участь у голосуванні|
| rebellions |кількість голосувань, коли депутати голосували проти фракції|

*Примітка: Голосування `“проти фракці”` обраховуються для фракцій, кількість депутатів в яких перевищує 4 особи

Підструктура `votes` містить реєстр результатів голосувань кожного депутата і має такий вигляд:

| Параметр     | Опис |
|------------|------------
| deputy_id | унікальний ідентифікатор депутата|
| vote | результат голосування депутата за дане питання|

## Інформація про політики

### Загальна інформація про політики

Для отримання загальної інформації про політики, створенні на порталі використовуй посилання

<%= link_to  api_policies_url(:format =>"json"), api_policies_url(:format =>"json") %>

цей набір містить перелік відомостей про всі створені політики і має наступну структуру:

| Параметр     | Опис |
|------------|------------|
| id | унікальний ідентифікатор політики |
| name | назва політики |
| description | опис політики |
| provisional | чи це сформована політика, чи лише проект політики |


### Інформація про підтримку політики конкретним депутатом

Щоб отримати інформацію про рівень підтримки політики конкретним депутатом використовуйте посилання:

<%= link_to  api_policy_url(:format =>"json", policy_id: Policy.first.id), api_policy_url(:format =>"json",  policy_id: Policy.first.id) %>

Цей набір містить статистичну інформацію про кількість підтриманих, та кількість непідтриманих депутатом голосувань з політики, а також, кількості питань, під час розгляду яких депутат був відсутній і має наступну структуру:

| Параметр     | Опис |
|------------|------------|
| id | унікальний ідентифікатор політики |
| name | назва політики |
| provisional | чи це сформована політика, чи лише проект політики|
| policy_person_distances | підструктура, яка містить реєстр з реультатами голосувань кожного депутата  |
| policy_divisions | підструктура що містить перелік голосувань, що входять до політики, та ступінь їх важливості для політики| 

Підструктура `policy_person_distances` має наступний вигляд:

| Параметр     | Опис |
|------------|------------|
|deputy_id | унікальний ідентифікатор депутата |
| same | кількість голосувань депутатом, відповідно до підтримки політики  питань, які менш важливі для політики  |
| diff  | кількість голосувань депутатом, протилежно підтримці політики  питань, які менш важливі для політики  |
| absent | кількість голосувань, які менш важливі для політики, під час яких депутат був відсутній  |
| same_strong| кількість голосувань депутатом, відповідно до підтримки політики  питань, які більш важливі для політики  |
| diff_strong  | кількість голосувань депутатом, протилежно підтримці політики  питань, які більш важливі для політики  |
| absent_strong | кількість голосувань, які більш важливі для політики, під час яких депутат був відсутній  |
|agreement | обрахований ступінь підтримки політики депутатом |
|voted | показує, чи брав визначений депутат участь хоча б в одному голосуванні з політики |

Підструктура `policy_divisions` надає інформацію про голосування, які входять в політику, їх позитивний, чи негативний вплив, та оцінку рівня їх впливу і має наступний вигляд:

| Параметр     | Опис |
|------------|------------|
|division_id | унікальний ідентифікатор голосування |
| support | характеризує за, чи проти політики дане голосування, та більше, чи менше важливе воно для політики |


 
# API - отримай дані в CSV
## Загальна інформація про депутатів 
<pre><%= link_to  api_mps_url(:format =>"csv"), api_mps_url(:format =>"csv") %></pre>
Цей запит надає базову інформацію про кожного депутата місцевої ради. Він містить їхні імена, фракцію, до якої  належить депутат, номер округу, в якому балотувався депутат, дату початку та закінчення каденції, якщо депутат виконував повноваження не всю каденцію, де:

| Параметр     | Опис |
|------------|------------
| id |ідентифікатор депутата|
|deputy_id| унікальний ідентифікатор депутата в системі|
|first_name | ім’я
|middle_name | по-батькові|
|last_name| прізвище|
|faction | фракція/група|
|okrug | номер округу, в якому балотувався кандидат|
|start_date | дата початку повноважень|
|end_date | дата складання повноважень|
|created_at | дата і час створення набору|
|updated_at | дата і час оновлення набору|


*Примітка:* Значення “2015-10-20” в “start_date”  – означає, що депутат набув повноважень з початком каденції відповідного скликання міської ради.
Значення "9999-12-31" в “end_date” означає, що депутат наразі виконує свої повнованження
 
## Детальна інформація про депутата
<%= link_to  api_mp_url(:format =>"csv", deputy_id: 1), api_mp_url(:format =>"csv", deputy_id: 1) %>
Перейшовши за цією адресою можна отримати інформацію про результати голосувань депутата помісячно з наступною структурою:

| Параметр     | Опис |
|------------|------------
| faction | фракція, в якій перебуває депутат|
|full_name| ПІБ депутата|
| rebellions |кількість голосувань, коли депутат голосував проти фракції|
|not_voted| кількість голосувань, коли депутат не голосував за вказаний період|
|absent |  кількість голосувань, коли депутат був відсутній за вказаний період|
|against | кількість голосувань депутата«Проти» за вказаний період|
|aye_voted| кількість голосувань депутата «За», протягом вказаного періоду|
|abstain | кількість голосувань депутата «Утримався» за вказаний період|
|votes_possible | загальна кількість голосувань за вказаний період|
|votes_attended | кількість голосувань, під час яких депутат був зареєстрований за вказаний період|
|date_mp_info | місяць і рік за який вказана статистика|
*Примітка: для значення `date_mp_info` = 31.12.9999 показники вказані за весь період 
 
 
## Інформація про голосуванням
В розділі “По голосуванням” можна отримати 4 набори даних, які містять інформацію про голосування.
### Загальний перелік голосувань
<%= link_to  api_divisions_url(:format =>"csv"), api_divisions_url(:format =>"csv") %>
В цьому наборі міститься перелік голосувань з базовою інформацією про них, а саме: 
* унікальний ідентифікатор голосування в системі,
* дату голосування, номер питання в порядку денному
* назва питання 
* час прийняття рішення 
* результат голосування
 
| Параметр     | Опис |
|------------|------------
|id | унікальний ідентифікатор голосування |
|date |дата голосування|
|number | номер рішення|
|name| назва питання, за яке голосували|
|clock_time| час голосування|
|result | кількість голосувань на сторінці|
|created_at | дата і час створення набору|
|updated_at| дата і час оновлення набору|
 

### Результати голосування депутатів за визначене питання 
<%= link_to  api_division_url(:format =>"csv", division: Division.first.id), api_division_url(:format =>"csv", division: Division.first.id) %>
Перейшовши за цим запитом можна отримати інформацію про те, як голосував кожен депутат в конкретному голосуванні з унікальним ідентифікатором `division_id=3000`. 
*Примітка: щоб подивитись деталі іншого голосування, замість `“3000”` потрібно підставити `division_id` обраного голосування.

| Параметр     | Опис |
|------------|------------
|id | унікальний ідентифікатор|
|division_id |унікальний ідентифікатор голосування|
|number | номер рішення|
|deputy_id| унікальний ідентифікатор депутата в системі|
|vote | результат голосування депутата|
|created_at | дата і час створення набору|
|updated_at| дата і час оновлення набору|
 

### Результати голосування за визначене питання в розрізі фракцій
<%= link_to  api_division_url(:format =>"csv", division: Division.first.id, filter: "whips"), api_division_url(:format =>"csv", division: Division.first.id, filter: "whips") %> 
Перейшовши за цим посиланням можна отримати результати голосування з унікальним ідентифікатором `division_id=3000` в розрізі депутатських фракцій. 
*Примітка: щоб подивитись деталі іншого голосування, замість `“3000”` використовуйте `division_id` обраного голосування.

| Параметр     | Опис |
|------------|------------
| id | ідентифікатор |
| division_id | унікальний ідентифікатор голосування в системі|
| party | назва фракції |
|aye_votes| Кількість голосів “За” фракції дане питання|
|no_votes| Кількість випадків не голосування депутатами фракції за дане питання|
| absent | Кількість відсутніх депутатів з фракції під час розгляду даного питання|
|against| Кількість голосів “Проти” депутатів фракції по даному питанню|
|abstaint| Кількість голосів “Утримався” депутатів фракції по даному питанню|
| whip_guess |Результат голосування більшості фракції по даному питанню|
|created_at | дата і час створення набору|
|updated_at| дата і час оновлення набору|
 
 
 
### Загальна статистика голосування за визначене питання
 
<%= link_to  api_division_url(:format =>"csv", division: Division.first.id, filter: "info"), api_division_url(:format =>"csv", division: Division.first.id, filter: "info") %> 
 
Перейшовши за цим посиланням можна отримати результати голосування з унікальним ідентифікатором `division_id=1000` в розрізі депутатських фракцій. 
*Примітка: щоб подивитись деталі іншого голосування, замість `“3000”` використовуйте `division_id` обраного голосування.
 
| Параметр     | Опис |
|------------|------------
| id | ідентифікатор |
| division_id | унікальний ідентифікатор голосування в системі|
|aye_votes| кількість голосів “За” фракції дане питання|
|no_votes| кількість випадків не голосування депутатами фракції за дане питання|
| absent | кількість відсутніх депутатів з фракції під час розгляду даного питання|
|against| кількість голосів “Проти” депутатів фракції по даному питанню|
|abstaint| кількість голосів “Утримався” депутатів фракції по даному питанню|
| possible_turnout | кількість депутатів міської ради на момент розгляду питання|
| turnout | кількість присутніх депутатів міської ради на момент розгляду питання|
| rebellions | кількість депутатів міської ради, які проголом=сували проти лінії фракції|
|created_at | дата і час створення набору|
|updated_at| дата і час оновлення набору|




## Інформація про політики

Для отримання загальної інформації про політики, створенні на порталі використовуй посилання

<%= link_to  api_policies_url(:format =>"csv"), api_policies_url(:format =>"csv") %>

цей набір містить перелік відомостей про всі створені політики і має наступну структуру:

| Параметр     | Опис |
|------------|------------|
| id | унікальний ідентифікатор політики |
| name | назва політики |
| description | опис політики |
| provisional | чи це сформована політика, чи лише проект політики |


